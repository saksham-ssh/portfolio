@echo off
setlocal EnableDelayedExpansion

set "input=input.txt"
set "output=output.txt"

> "%output%" (
  for /f "usebackq delims=" %%A in ("%input%") do (
    set "line=%%A"

    REM Remove everything after the last /
    :loop
    if "!line:*/=!" neq "!line!" (
        set "line=!line:~0,-1!"
        goto loop
    )

    REM Write XML line (PVCS style, no C:\, only /)
    echo ^<DIR VCSPATH='!line!' MAPPEDPATH='!line!' /^>
  )
)

echo Done!
pause
